Develop the Single Page Web Application named ESN Regression Studio 

GLOBAL REQUIREMENTS

Tech Stack:
- HTML, Tailwind CSS (CDN only), vanilla JavaScript
- Emojis exclusively for icons (no SVGs)
- Standard number inputs only (no range sliders)
- Native Tailwind utilities only (no custom CSS or animations)

Design Principles:
- Mobile-first responsive design
- Premium, high-end aesthetic with bold visual elements
- Rich typography, generous spacing, polished components
- Vibrant emoji usage throughout
- Professional product styling

Accessibility:
- ARIA labels on all interactive elements
- Role attributes on modals (dialog)
- Focus management when opening/closing modals
- Sufficient color contrast in both themes
- Screen reader friendly structure

Dark Mode:
- Background: gradient slate-900 via slate-800 to slate-900
- Cards: slate-800 with transparency
- Text: slate-100 primary, slate-400 secondary
- Borders: slate-700 with transparency
- Inputs: slate-700 background
- Preserved gradient accents on buttons
- Toggle via class on document element
- Persist preference to localStorage

Color Palette for Dimensions:
#3B82F6, #10B981, #F59E0B, #EF4444, #8B5CF6, #EC4899, #06B6D4, #84CC16, #F97316, #14B8A6

HEADER

Sticky glass-morphism header with blur backdrop and subtle transparent bottom border.

Left Section:
- Gradient logo container (blue-500 via indigo-500 to purple-600), rounded-xl, shadow-blue-500/30, containing üìä emoji
- Title "ESN Studio" (bold) with subtitle "Autoregressive Forecasting" (smaller, muted)

Right Section:
- Model status badge: pulsing dot (slate=no model, emerald=model exists) with text ("No Model" or "150 steps")
- Predict button: gradient blue-500 to indigo-600, ‚ö° emoji, hidden until model exists
- Configure button: ‚öôÔ∏è emoji, opens configuration modal
- Menu button: ‚ò∞ emoji, opens slide-out menu
- Theme toggle: üåô (light mode) / ‚òÄÔ∏è (dark mode)

MAIN VISUALIZATION AREA

Tab Navigation:
Horizontally scrollable container with five mode buttons:
1. üìä Small Multiples / Grid - all dimensions in grid layout
2. üîç Focus View / Focus - single dimension with confidence intervals
3. üå°Ô∏è Heatmap - color-coded prediction matrix
4. üìà Uncertainty / CI - confidence visualization
5. üì∑ Snapshot - bar chart for single time step

Tab Styling:
- Active: gradient blue-500 to indigo-600, white text, shadow
- Inactive: slate-100 (light) / slate-700 (dark) background

Chart Container:
White/dark rounded-2xl card with shadow-xl and subtle border containing HTML5 Canvas.

Floating Controls (visible when predictions exist):
- Top-right: ‚ûï zoom in, ‚ûñ zoom out, üîÑ reset zoom
- Top-left: zoom level badge showing percentage

Export Controls:
- üñºÔ∏è Save as PNG
- üìÑ Save as SVG
- üìã Copy to Clipboard

Interaction Features:
- Pinch-to-zoom on touch devices
- Scroll wheel zoom
- Drag to pan when zoomed
- Momentum scrolling on touch
- Crosshair lines on focus view
- Highlighted point with glow effect

Tooltip (cursor/touch following):
- Step number (prominent)
- Dimension indicator with color dot
- Predicted value (bold)
- Confidence interval (lower - upper)
- Spread/uncertainty value
- Touch-and-hold triggers tooltip

Empty State:
- Centered decorative layered containers with gradient backgrounds
- Large üìä emoji
- Title "Create a Model to Begin"
- Subtitle explaining ESN autoregressive forecasting
- "Start with Defaults" primary button (‚ö°, gradient)
- "Load" button (üì§) and "Demo" button (‚ú®, purple-to-pink gradient)

Loading State:
- Blurred overlay
- Spinning circular loader (border animation)
- Loading text (e.g., "Processing...", "Training on uploaded data...")
- Gradient progress bar (blue-500 to indigo-500) with percentage
- Red "Cancel" button

MODE-SPECIFIC COMPONENTS

Dimension Selector (Focus Mode):
Horizontal scrollable row of dimension buttons (D1, D2, D3...).
- Active: dimension's assigned color as background
- Inactive: slate background

Step Selector (Snapshot Mode):
Label "Step:" with numeric input for selecting prediction step.

Statistics Bar (Focus Mode):
Columns with glass-effect cards:
- Min value
- Max value
- Mean value
- Final value
- Trend (colored arrow ‚Üë green / ‚Üì red with absolute change)
- Confidence percentage
Each card: uppercase tiny label, bold value.

SIDE PANEL

Model Metrics Section:
Header "Model Metrics" (uppercase).
Rows: Samples Trained (blue highlight), Avg Loss (exponential), Gradient Norm (exponential), Sample Weight (3 decimals).

Prediction Section:
Header "Prediction".
"Future Steps" numeric input (any positive integer).
"Run Prediction" gradient button (disabled when no model).

Event Log Section:
Header "Event Log" with filter dropdown (All, Info, Success, Warning, Error).
Search input for filtering.
Scrollable list (display latest 50, store max 200).
Entry format: colored category label (blue=info, emerald=success, amber=warning, red=error), timestamp, message.

SLIDE-OUT MENU

Full-height panel from right side.

Model Section (üìÅ):
- üéõÔ∏è Create & Configure (blue background) - "Set up model parameters"
- üíæ Save & Load (emerald background) - "Persist your models"

Data Section (üìÇ):
- üì§ Upload Dataset (purple background) - "Import time series data"
- ‚ûï Manual Insert (amber background) - "Add individual time steps"

Test Section (üß™):
- üí° Random Test (pink background) - "Generate synthetic time series"

Advanced Section (‚öôÔ∏è):
- üîß Settings (slate background) - "Module URL & preferences"
- üìã View Data Table (slate background) - "Raw prediction values"
- ‚ùì Help (slate background)

Menu items: full-width buttons with icon container, title, description, hover states.

MODALS

Configuration Modal:

Presets Bar (horizontal scrollable):
"Start Here" (blue, default), "Fast", "Balanced", "Accurate", "Adaptive", "Robust"

Collapsible Sections (toggle with ‚ñº/‚ñ≤):

Reservoir Architecture:
- reservoirSize: 256 - "Neurons in reservoir"
- spectralRadius: 0.9 - "Memory length control"
- leakRate: 0.3 - "Temporal smoothing"
- inputScale: 1.0 - "Input scaling factor"
- biasScale: 0.1 - "Bias scaling"
- reservoirSparsity: 0.9 - "Zero connections"
- inputSparsity: 0.0 - "Input sparsity"
- activation: tanh (select: tanh, relu) - "Activation function"

Readout Configuration:
- useInputInReadout: true (toggle) - "Append input to state"
- useBiasInReadout: true (toggle) - "Include bias term"

Training (RLS):
- readoutTraining: "rls" (fixed display) - "RLS training"
- rlsLambda: 0.999 - "Forgetting factor"
- rlsDelta: 1.0 - "Initial P diagonal"
- epsilon: 1e-8 - "Numerical stability"
- l2Lambda: 0.0001 - "L2 regularization"
- gradientClipNorm: 1.0 - "Max update norm"

Normalization:
- normalizationEpsilon: 1e-8 - "Stability constant"
- normalizationWarmup: 10 - "Warmup samples"

Outlier Handling:
- outlierThreshold: 3.0 - "Z-score threshold"
- outlierMinWeight: 0.1 - "Outlier min weight"

Uncertainty:
- uncertaintyMultiplier: 1.96 - "CI Multiplier (1.96 = 95% CI)"

Initialization:
- weightInitScale: 0.1 - "Initial weight scale"
- seed: 42 - "Random seed"
- verbose: false (toggle) - "Detailed logging"

Footer: "Reset Defaults" (slate), "Reset All" (red), "Cancel" (slate), "Create Model" (gradient blue-indigo)

Upload Dataset Modal:

- Drag-and-drop zone: üìÅ emoji, dashed border, hover highlight
- Text "Drop JSON file here or tap to browse"
- Hidden file input (.json)
- Textarea for pasting JSON
- Collapsible format example with "Copy example" button:
```json
{
  "coordinates": [
    [1.0, 2.0, 3.0],
    [1.1, 2.1, 3.1],
    [1.2, 2.2, 3.2]
  ]
}
```
- Validation preview (green): dimensions count, time steps count, status
- Error display (red) for invalid data
- Footer: Cancel, Validate, "Apply & Train" (disabled until validated)

Manual Insert Modal:

- Description text
- "Generate Template" button (creates JSON template based on current dimensions)
- Textarea for JSON input
- Validation feedback area
- Footer: Cancel, "Insert & Train"

Save & Load Modal:

Save Section:
- üì• Download - downloads JSON file
- üíæ Browser - saves to localStorage with name prompt

Load Section:
- üì§ Tap-to-upload zone
- List of saved models from localStorage (name, dimension count, "Load" button)
- "Clear all saved models" link

Random Test Modal:

Inputs:
- Seed: 42
- Dimensions: 3
- Time Steps: 200
- Noise: 0.1
- Outliers rate: 0.02
- Difficulty: select (Easy, Medium, Hard)

Footer: Cancel, "Generate & Run" (purple-pink gradient)

Settings Modal:

- Module URL input (monospace)
- "Reinitialize Worker" button (amber)
- "Clear All Preferences" button (red)

Data Table Modal (full-screen):

- Scrollable table with sticky header
- Columns: Step, P1...Pn (predictions), L1...Ln (lower bounds), U1...Un (upper bounds)
- Monospace font, zebra striping
- Column sorting by clicking headers
- Row highlighting on hover with full details
- üìä Export CSV button
- üìã Copy All button
- Search/filter input

Help/Documentation Modal:

Worker Setup:
```
The ESNRegression library runs in a Web Worker for non-blocking performance.
Module URL: https://cdn.esm.sh/jsr/@hviana/multivariate-regression@1.4.2
```

Method Documentation:

Creating a Model:
```javascript
const model = new ESNRegression(config);
```

Online Training (fitOnline):
```javascript
model.fitOnline({ coordinates: [[x1,y1,z1], [x2,y2,z2]] });
// Min two coordinates per call (t, t+1), (t+2, t+3)...
// Returns: { averageLoss, gradientNorm, sampleWeight }
```

Prediction:
```javascript
const result = model.predict(futureSteps);
// Returns: { predictions, lowerBounds, upperBounds, confidence }
// Each is array of arrays [step][dimension]
```

Save/Load:
```javascript
const state = model.save();
model.load(state);
```

Model Summary:
```javascript
const summary = model.getModelSummary();
// Returns: { nFeatures, sampleCount, ... }
```

Preset Configurations:
- Start Here/Default: reservoirSize=256, spectralRadius=0.9, leakRate=0.3
- Fast: reservoirSize=64, reservoirSparsity=0.95
- Balanced: reservoirSize=256, spectralRadius=0.9
- Accurate: reservoirSize=512, spectralRadius=0.95, leakRate=0.2
- Adaptive: rlsLambda=0.97, spectralRadius=0.85, leakRate=0.5
- Robust: outlierThreshold=2.0, outlierMinWeight=0.05, l2Lambda=0.01, leakRate=0.2

TOAST NOTIFICATIONS

Bottom-positioned container
- Colored backgrounds: emerald (success), amber (warning), red (error), blue (info)
- Message text
- ‚úñÔ∏è close button
- Auto-dismiss: 4s default, 6s for errors

STATE MANAGEMENT

Application State Object:
- config: all model configuration parameters
- modelExists: boolean
- nDimensions: number
- sampleCount: number
- predictions: current results
- vizMode: current visualization mode
- selectedDim: dimension index
- selectedStep: step for snapshot view
- isDark: boolean
- logs: array (max 200 entries)
- metrics: { avgLoss, gradientNorm, sampleWeight }
- zoom: { level, offsetX, visibleStart, visibleCount }
- hover: { active, x, y, dataIndex }

Persist to localStorage: config, vizMode, isDark

WEB WORKER

Inline Web Worker implementation:
- Dynamically imports ESNRegression module
- Message types: init, createModel, train, predict, save, load, getSummary, reset, cancel
- Emits progress events during training
- Returns results with requestId for tracking
- Supports cancellation of long-running operations

ERROR HANDLING

- Wrap all async operations in try-catch
- Display errors via toast notifications
- Log errors to event log
- Graceful degradation when worker fails
- Validation feedback for all user inputs
